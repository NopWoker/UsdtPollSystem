import{a as u}from"./user-CznRQ-zt.js";import"./index-Dz-O0943.js";import J from"./edit-DfPGykMz.js";import{a as Q}from"./avatar-DvSZjoFF.js";import{M as v,j as X}from"./@arco-design-uttiljWv.js";import{r as i,a as S,o as Y,h as l,ba as Z,n as B,k as p,t as a,l as o,j as h,p as H,y as c,M as y,m as ee,a1 as te}from"./@vue-9ZIPiVZG.js";import"./@wangeditor-Bg8kJaak.js";import"./pinia-CtMvrpix.js";import"./axios-BOAqGR8s.js";import"./crypto-js-B6um_4t4.js";import"./lodash-fWIJiXPB.js";import"./qs-CGfOb-kZ.js";import"./side-channel-0xN0c_x9.js";import"./es-errors-CFxpeikN.js";import"./object-inspect-Pz2pmunN.js";import"./side-channel-list-asz5kCf8.js";import"./side-channel-map-DBz1yoQn.js";import"./get-intrinsic-CCph2EoF.js";import"./es-object-atoms-Ditt1eQ6.js";import"./math-intrinsics-Cv-yPkyD.js";import"./gopd-fcd2-aIC.js";import"./es-define-property-bDCdrV83.js";import"./has-symbols-BaUvM3gb.js";import"./get-proto-cKMTtFGz.js";import"./dunder-proto-CiSsr-aM.js";import"./call-bind-apply-helpers-DFdvRtIg.js";import"./function-bind-CHqF18-c.js";import"./hasown-DwiY0sux.js";import"./call-bound-BMZ_xw6V.js";import"./side-channel-weakmap-CMrfu08b.js";import"./vue-router-DXldG2q0.js";import"./nprogress-DxiOKil-.js";import"./monaco-editor-nMXQdunA.js";import"./file2md5-B4-SI92N.js";import"./spark-md5-D8tidE2e.js";import"./lodash.noop-BeiKyXVG.js";import"./vue-color-kit-w75Wyu4C.js";import"./vue-clipboard3-DpvFlCWw.js";import"./clipboard-ehac6u_s.js";import"./vue-echarts-B-rvonkO.js";import"./resize-detector-G6vbKCU7.js";import"./echarts-Cz-L25MO.js";import"./tslib-BDyQ-Jie.js";import"./zrender-xbpiMqDc.js";import"./@iconify-BfRLEUc9.js";import"./vue-i18n-PeqK6azz.js";import"./@intlify-CJ2pDqUV.js";import"./vue-QIJ1KGct.js";import"./dayjs-DUkVwsK-.js";import"./resize-observer-polyfill-B1PUzC5B.js";import"./compute-scroll-into-view-1gs_hJI2.js";import"./b-tween-BtQQsX34.js";import"./number-precision-BW_FzNZC.js";import"./scroll-into-view-if-needed-SxpMpKWN.js";import"./b-validate-DHOn5MGm.js";import"./color-JIMhKyf3.js";import"./color-string-Ckj7g19G.js";import"./color-name-BQ5IbGbl.js";import"./simple-swizzle-BUB9Iq-C.js";import"./is-arrayish-BII_q15j.js";const ae={class:"ma-content-block lg:flex justify-between"},oe=["src"],se={key:0},pt={__name:"index",setup(le){const f=i(),w=i(),V=i(!1),k=i(),g=i(""),R=i([0]),r=i({username:"",phone:"",email:"",status:"",create_time:[],dept_id:""}),M=async()=>{R.value=[0],r.value.dept_id=""},j=async(s,e)=>{const n=await u.changeStatus({id:e,status:s});n.code===200&&(v.success(n.message),f.value.refresh())},C=s=>{u.clearCache({id:s}).then(e=>e.code===200&&v.success(e.message))},N=async s=>{u.initUserPassword({id:s}).then(e=>e.code===200&&v.success(e.message))},F=async s=>{const e=await u.setHomePage({id:k.value,dashboard:g.value});e.code===200&&(v.success(e.message),f.value.refresh(),s(!0)),s(!1)},O=(s,e)=>{if(s==="resetPassword"){X.info({title:"提示",content:"确定将该用户密码重置为 sai123456 吗？",simple:!1,onBeforeOk:n=>{N(e),n(!0)}});return}if(s==="updateCache"){C(e);return}if(s==="setHomePage"){V.value=!0,k.value=e;return}},D=S({api:u.getPageList,operationColumnWidth:210,add:{show:!0,auth:["/core/user/save"],func:async()=>{var s;(s=w.value)==null||s.open()}},edit:{show:!0,auth:["/core/user/update"],func:async s=>{var e;(e=w.value)==null||e.open("edit",s.id)}},delete:{show:!0,auth:["/core/user/destroy"],func:async s=>{var n;(await u.destroy(s)).code===200&&(v.success("删除成功！"),(n=f.value)==null||n.refresh())}}}),E=S([{title:"头像",dataIndex:"avatar",width:75},{title:"账户",dataIndex:"username",width:130},{title:"昵称",dataIndex:"nickname",width:120},{title:"手机",dataIndex:"phone",width:150},{title:"邮箱",dataIndex:"email",width:200},{title:"状态",dataIndex:"status",width:100},{title:"工作台",dataIndex:"dashboard",width:100},{title:"注册时间",dataIndex:"create_time",width:180}]),$=async()=>{},P=async()=>{var s;(s=f.value)==null||s.refresh()};return Y(()=>{$(),P()}),(s,e)=>{const n=l("a-input"),m=l("a-form-item"),_=l("a-col"),A=l("a-range-picker"),U=l("sa-select"),K=l("sa-switch"),L=l("a-avatar"),T=l("icon-refresh"),I=l("a-link"),W=l("icon-double-right"),b=l("a-doption"),q=l("a-dropdown"),z=l("sa-table"),G=l("a-modal"),x=Z("auth");return p(),B("div",ae,[a(z,{ref_key:"crudRef",ref:f,options:D,columns:E,searchForm:r.value,onResetSearch:M},{tableSearch:o(()=>[a(_,{sm:8,xs:24},{default:o(()=>[a(m,{field:"username",label:"账号名称"},{default:o(()=>[a(n,{modelValue:r.value.username,"onUpdate:modelValue":e[0]||(e[0]=t=>r.value.username=t),placeholder:"请输入账号名称","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{sm:8,xs:24},{default:o(()=>[a(m,{field:"phone",label:"手机"},{default:o(()=>[a(n,{modelValue:r.value.phone,"onUpdate:modelValue":e[1]||(e[1]=t=>r.value.phone=t),placeholder:"请输入手机","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{sm:8,xs:24},{default:o(()=>[a(m,{field:"email",label:"邮箱"},{default:o(()=>[a(n,{modelValue:r.value.email,"onUpdate:modelValue":e[2]||(e[2]=t=>r.value.email=t),placeholder:"请输入邮箱","allow-clear":""},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{sm:16,xs:24},{default:o(()=>[a(m,{field:"create_time",label:"注册时间"},{default:o(()=>[a(A,{modelValue:r.value.create_time,"onUpdate:modelValue":e[3]||(e[3]=t=>r.value.create_time=t),"show-time":"",style:{width:"100%"}},null,8,["modelValue"])]),_:1})]),_:1}),a(_,{sm:8,xs:24},{default:o(()=>[a(m,{field:"status",label:"状态"},{default:o(()=>[a(U,{modelValue:r.value.status,"onUpdate:modelValue":e[4]||(e[4]=t=>r.value.status=t),dict:"data_status",placeholder:"请选择状态","alow-clear":""},null,8,["modelValue"])]),_:1})]),_:1})]),status:o(({record:t})=>[a(K,{modelValue:t.status,"onUpdate:modelValue":d=>t.status=d,disabled:t.id==1,onChange:d=>j(d,t.id)},null,8,["modelValue","onUpdate:modelValue","disabled","onChange"])]),avatar:o(({record:t})=>[a(L,null,{default:o(()=>[ee("img",{src:t.avatar?t.avatar:te(Q),style:{"object-fit":"cover"}},null,8,oe)]),_:2},1024)]),operationCell:o(({record:t})=>[t.id==1?(p(),B("div",se,[a(I,{onClick:d=>C(t.id)},{default:o(()=>[a(T),e[7]||(e[7]=c(" 更新缓存"))]),_:2},1032,["onClick"])])):H("",!0)]),operationAfterExtend:o(({record:t})=>[t.id!=1?(p(),h(q,{key:0,trigger:"hover",onSelect:d=>O(d,t.id)},{content:o(()=>[y((p(),h(b,{value:"updateCache"},{default:o(()=>e[9]||(e[9]=[c("更新缓存")])),_:1})),[[x,["/core/user/clearCache"]]]),y((p(),h(b,{value:"setHomePage"},{default:o(()=>e[10]||(e[10]=[c("设置首页")])),_:1})),[[x,["/core/user/setHomePage"]]]),y((p(),h(b,{value:"resetPassword"},{default:o(()=>e[11]||(e[11]=[c("重置密码")])),_:1})),[[x,["/core/user/initUserPassword"]]])]),default:o(()=>[a(I,null,{default:o(()=>[a(W),e[8]||(e[8]=c(" 更多"))]),_:1})]),_:2},1032,["onSelect"])):H("",!0)]),_:1},8,["options","columns","searchForm"]),a(J,{ref_key:"editRef",ref:w,onSuccess:P},null,512),a(G,{visible:V.value,"onUpdate:visible":e[6]||(e[6]=t=>V.value=t),onBeforeOk:F},{title:o(()=>e[12]||(e[12]=[c("设置用户后台首页")])),default:o(()=>[a(m,{label:"用户首页"},{default:o(()=>[a(U,{modelValue:g.value,"onUpdate:modelValue":e[5]||(e[5]=t=>g.value=t),placeholder:"请选择用户首页",dict:"dashboard"},null,8,["modelValue"])]),_:1})]),_:1},8,["visible"])])}}};export{pt as default};
